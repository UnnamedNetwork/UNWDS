arch: arm64-graviton2 # in AWS over Graviton2 CPU
virt: lxd             # required, routes to an LXD container
os: linux             # required for arch different than amd64
group: edge
import:
 source: ./tests/travis/setup-php.yml
script:
 - composer install --prefer-dist
 - composer fund
 - ./vendor/bin/phpunit --bootstrap vendor/autoload.php --fail-on-warning tests/phpunit
 - composer install --no-dev --prefer-dist
 - composer fund
 - ./tests/travis.sh -t4

cache:
 directories:
  - $HOME/.composer/cache/files
  - $HOME/.composer/cache/vcs

notifications:
 email:
  recipients:
   - unwds_dev@dtcg.xyz
  on_success: change
  on_failure: always
